!function e(t,i,o){function n(c,s){if(!i[c]){if(!t[c]){var l="function"==typeof require&&require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);var r=new Error("Cannot find module '"+c+"'");throw r.code="MODULE_NOT_FOUND",r}var u=i[c]={exports:{}};t[c][0].call(u.exports,function(e){var i=t[c][1][e];return n(i?i:e)},u,u.exports,e,t,i,o)}return i[c].exports}for(var a="function"==typeof require&&require,c=0;c<o.length;c++)n(o[c]);return n}({1:[function(){function e(e){"image"==e.item.type&&(images[e.item.id]=e.result)}function t(e){console.log(e.loaded)}function i(e){console.log(e);var t=new Vivus("cover",{duration:190,type:"oneByOne",start:"manual",animTimingFunction:Vivus.EASE,file:"svg/cover.svg",onReady:function(){t.play(),l.index()}});createjs.Sound.play("sound1",createjs.Sound.INTERRUPT_EARLY,0,0,!1),o=Snap("#comicBBox"),n=Snap("#content")}new pageUtil("#GradeBox").response(),new pageUtil("#shareBox").response(),document.querySelector(".share").ontouchstart=function(e){document.querySelector("#shareBox").style.display="block",e.preventDefault(),e.stopPropagation()},document.querySelector("#shareBox").ontouchstart=function(e){this.style.display="none",e.preventDefault(),e.stopPropagation()},document.querySelector(".again").ontouchstart=function(e){document.querySelector("#GradeBox").style.display="none",S.again(),e.preventDefault(),e.stopPropagation(),console.log("again")},document.querySelector(".ewm").ontouchstart=function(e){e.stopPropagation()};var o,n;!function(){function e(e){this.onEnd=e,this.root=document.querySelector("#comicBBox"),this.height=Math.round(this.root.getBoundingClientRect().bottom-document.documentElement.clientHeight),this.lengths=[1410,1950,2100,2340,2640],this.comicTime=800,this.halt=800,this.slideTime=50,this.prevOffset=0,this.blockNum=0,this.comicNum=0,this.blocks=[3,2,1,1,1,1];for(var t=(this.comics=[],1);10>t;t++);}e.prototype.auto=function(){var e=this;this.comics.forEach(function(e){e.attr({opacity:1})});anime({targets:document.querySelectorAll("#comic>g:not(:first-child)"),translateY:function(){return 2e3},opacity:{value:0,duration:5e3},delay:function(e,t){return t>=6?2500+850*t:850*t},duration:800,direction:"reverse",easing:"easeOutExpo"}),anime({targets:document.querySelector("#comicBBox"),translateY:function(){return-parseInt(1632*document.documentElement.clientWidth/640)},translateZ:"0",duration:12e3,direction:"normal",delay:"1000",easing:"linear",complete:function(){setTimeout(e.onEnd,1e3)}})},e.prototype.css3=function(){Snap("#comicBBox").node.className="animate",Snap("#comicBBox").node.style.cssText+="-webkit-transform:translate3d(0,"+-parseInt(1632*document.documentElement.clientWidth/640)+"px,0)",setTimeout(this.onEnd,14e3)},e.prototype.start=function(){for(var e=0;e<this.blocks[this.blockNum];e++)setTimeout(function(){this.showComic()}.bind(this),e*this.comicTime);this.blockNum++,setTimeout(function(){this.slide()}.bind(this),2e3)},e.prototype.slide=function(){var e=parseInt((this.lengths[this.blockNum-1]-1008)*document.documentElement.clientWidth/640),t=((e-this.prevOffset)/this.slideTime).toString().substr(0,4);this.prevOffset=e,this.root.style.cssText="-webkit-transform:translate3d(0,-"+e+"px,0);-webkit-transition-duration:"+t+"s;opacity:1";for(var i=0;i<this.blocks[this.blockNum];i++)setTimeout(function(){this.showComic()}.bind(this),i*this.comicTime);this.blockNum!==this.blocks.length-1&&(setTimeout(function(){this.slide()}.bind(this),this.comicTime*this.blocks[this.blockNum]+this.halt),this.blockNum++)},e.prototype.showComic=function(){this.comics[this.comicNum++].animate({opacity:1},1e3,function(){})},window.ComicToll=e}();var a,c,s,l={isSaveBtn:!0,index:function(){setTimeout(function(){Snap("#cover").touchstart(function(e){e.stopPropagation(),e.preventDefault(),Snap("#cover").animate({opacity:0},1500),setTimeout(function(){document.querySelector("#comicBBox").style.opacity=1,l.comic(),createjs.Sound.stop(),createjs.Sound.play("sound2",createjs.Sound.INTERRUPT_EARLY,0,0,!1)},500),Snap("#cover").untouchstart(arguments.callee)})},2e3)},comic:function(){document.querySelector("#cover").style.display="none",o.node.style.willChange="transform";var e=0;o.selectAll("#index path").forEach(function(t){t.attr({opacity:0}),setTimeout(function(){t.animate({opacity:1},1e3)},e),e+=100});var t=new ComicToll(l.page1);setTimeout(function(){t.css3()},2e3)},page1:function(){document.querySelector("#contentBox").style.opacity=1,document.querySelector("#comicBBox").style.display="none",document.querySelector("#hu").setAttribute("class","animate"),setTimeout(function(){n.select("#doll1").animate({opacity:1},400,function(){n.select("#aha").animate({opacity:1},400,function(){n.select("#smg").animate({opacity:1},400),setTimeout(function(){l.page2()},1500)})})},400)},page2:function(){n.select("#page1").animate({opacity:"0"},300),n.select("#page2").animate({opacity:"1"},800),document.querySelector("#comicBBox").style.display="none",n.select("#btn").touchstart(function(e){e.preventDefault(),e.stopPropagation(),l.isSaveBtn?l.page3():(console.log("time to game"),S.setup(),document.getElementById("canvas").style.display="block")})},page3:function(){function e(){n.selectAll("#save path").forEach(function(e,t){var i=t+1;e.attr({d:n.select("#start path:nth-child("+i+")").attr("d")})})}function t(){n.select("#page2").use(n.select("#notice")),n.select("#saveNotice").attr({opacity:0})}l.isSaveBtn=!1;for(var i=(n.selectAll("#doc_2_ path").length,1);5>=i;i++)n.select("#path path:nth-child("+i+")").animate({d:n.select("#doc path:nth-child("+i+")").attr("d"),fill:"#040000",strokeWidth:"0"},500);setTimeout(function(){var e=0;n.selectAll("#doc path").forEach(function(t,i){5>i||(setTimeout(function(){o.append(t)},e),e+=20)})},500);var o=n.select("#path");n.selectAll("#save path").forEach(function(e,t){var i=t+1;e.animate({d:n.select("#start path:nth-child("+i+")").attr("d")},2e3)}),setTimeout(function(){e(),t()},2100)}},r=[4404,9267,13658,18050,22050,26150,29642,33070,35850,38652,40820,42844],u=[100,90,80,70,60,50,40,30,20,15,10,5],d=r.length,m=r.map(function(e,t,i){return i[t+1]-e}).slice(0,-1);m.unshift(r[0]);var h,f,p,v=100,y=600,g=3100,b=m[0]-y-g,T=m.map(function(e){return Math.round(g/(m[0]-y)*(e-y))}),w=m.map(function(e,t){return e-y-T[t]});window.onload=function(){a=document.getElementById("canvas"),images=images||{};var o=new createjs.LoadQueue(!1);o.installPlugin(createjs.Sound),o.addEventListener("fileload",e),o.addEventListener("complete",i),o.addEventListener("progress",t),o.loadManifest(lib.properties.manifest)};var S={results:[],result:{},grades:0,level:0,count:0,timer:0,init:function(){var e=new lib.face1,t=new lib.body1;this.results.push({face:e,body:t});var i=new lib.face2,o=new lib.body2;this.results.push({face:i,body:o});var n=new lib.face3,a=new lib.body3;this.results.push({face:n,body:a})},showResult:function(e){var t=this.results;S.hideDoll(),S.clickable=!1,c.addChildAt(t[e].body,2),c.addChild(t[e].face),this.result=t[e]},hideDoll:function(){s.visible=!1,p.stop(),h.visible=!1},grow:function(){S.clickable=!0,face.visible=!1,s.visible=!0,p.visible=!0,p.gotoAndPlay(1),s.gotoAndPlay(1),p.framerate=s.framerate=Math.round(lib.properties.fps*g/T[S.count]),s.play()},showDoll:function(){S.count++,c.removeChild(this.result.body),c.removeChild(this.result.face),p.visible=!1,h.visible=!0,face.visible=!0,S.count!=d&&setTimeout(function(){S.grow()},w[S.count])},began:function(){f.gotoAndPlay(1),f.visible=!0,createjs.Sound.play("music",createjs.Sound.INTERRUPT_EARLY,0,0,!1),this.timer=(new Date).getTime(),setTimeout(function(){s.visible=!0,s.gotoAndPlay(1),face.visible=!1,p.gotoAndPlay(1),p.visible=!0,s.framerate=p.framerate=f.framerate=24,S.clickable=!0},y+b),this.enableClick(),this.timeEvent()},timeEvent:function(){r.forEach(function(e){setTimeout(function(){S.clickable&&(S.showResult(2),console.log((new Date).getTime()-S.timer))},e+v),setTimeout(function(){S.showDoll()},e+y),setTimeout(function(){S.count==d-1?setTimeout(S.end,1e3):(f.framerate=Math.round(lib.properties.fps*m[0]/m[S.count+1]),f.gotoAndPlay(1))},e+60)})},enableClick:function(){var e=new createjs.Shape;e.graphics.beginFill("#000").drawRect(230,770,180,180),f.hitArea=e,f.on("click",function(){S.clickable&&S.clickHandler(S.count)})},clickHandler:function(e){S.showResult(S.getResult(e)),S.clickable=!1},getResult:function(e){var t=(new Date).getTime(),i=t-S.timer;return i+u[e]<r[e]?1:i-u[e]<r[e]<i+u[e]?(S.grades++,0):2},end:function(){f.visible=p.visible=!1,c.addChildAt(lampMovie,1),c.on("click",function(){S.showGrade(),setTimeout(function(){S.grades=0,S.level=0,S.count=0,S.timer=0,c.removeChild(lampMovie),s.framerate=p.framerate=f.framerate=24},500)},null,!0)},again:function(){f.visible=!0,f.gotoAndPlay(1),createjs.Sound.play("music",createjs.Sound.INTERRUPT_EARLY,0,0,!1),this.timer=(new Date).getTime(),setTimeout(function(){s.visible=!0,s.gotoAndPlay(1),face.visible=!1,p.gotoAndPlay(1),p.visible=!0,S.clickable=!0},y+b),this.timeEvent()},getGrade:function(){var e=[4,6,7,8,10,11,12],t=S.grades;return S.grades==d?6:e[4]<t&&t<=e[5]?5:e[3]<t&&t<=e[4]?4:e[2]<t&&t<=e[3]?3:e[1]<t&&t<=e[2]?2:e[0]<t&&t<=e[1]?1:t<e[0]?0:void 0},showGrade:function(){document.querySelector("#Grade").style.backgroundPosition="-"+640*S.getGrade()+"px 0",document.querySelector("#GradeBox").style.display="block"},setup:function(){s=new lib.streaming,s.visible=!1,S.init(),lampMovie=new lib.lampMovie,h=new lib.doll,f=new lib.pulse,face=new lib.face;var e=new lib.bg,t=new lib.bg2,i=new lib.Waterpipe;p=new lib.waterClip,i.setTransform(305.5,172.1,1,1,0,0,0,48.1,163.2),c=new createjs.Stage(a),c.addChild(e),c.addChild(t),c.addChild(h),c.addChild(face),c.addChild(p),c.addChild(s),c.addChild(f),c.addChild(i),createjs.Touch.enable(c),setTimeout(function(){S.began()},1e3),c.update(),createjs.Ticker.setFPS(lib.properties.fps),createjs.Ticker.addEventListener("tick",c)}}},{}]},{},[1]);